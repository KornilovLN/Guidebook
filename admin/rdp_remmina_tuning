Настройка удаленной связи с использованием Remmina через роутер требует нескольких шагов. Я разложу процесс на несколько частей: настройка маршрутизатора, установка и настройка Remmina, настройка виртуальных машин и Docker-контейнеров.

### 1. Настройка маршрутизатора

1. **Проброс портов (Port Forwarding):**
   - Войдите в интерфейс настройки вашего маршрутизатора (обычно через веб-браузер по адресу 192.168.0.1 или 192.168.1.1).
   - Найдите раздел проброса портов или виртуальных серверов.
   - Создайте новое правило проброса портов, указывая внешний порт (например, 3389 для RDP) и внутренний IP-адрес машины, на которой будет установлена ваша виртуальная машина (например, 192.168.1.100) с соответствующим портом.

2. **Настройка статического IP для удаленной машины:**
   - Чтобы ваш маршрутизатор всегда присваивал один и тот же IP-адрес вашей удаленной машине, настройте статический IP-адрес или используйте DHCP-резервирование.

### 2. Установка и настройка Remmina

1. **Установка Remmina:**
   - На вашей локальной машине (хосте) установите Remmina:
     ```bash
     sudo apt update
     sudo apt install remmina remmina-plugin-rdp remmina-plugin-vnc
     ```

2. **Настройка подключения:**
   - Откройте Remmina.
   - Создайте новое подключение, выберите протокол (например, RDP).
   - Введите внешний IP-адрес вашего маршрутизатора и порт, который вы настроили для проброса (например, `external_ip:3389`).
   - Введите имя пользователя и пароль для удаленной машины.

### 3. Настройка виртуальной машины (VM)

1. **Установка виртуальной машины:**
   - На удаленной машине установите программу для виртуализации, например, VirtualBox или KVM.
   - Создайте виртуальную машину и установите в нее операционную систему.

2. **Настройка сети для виртуальной машины:**
   - Настройте сеть виртуальной машины в режиме мостового подключения (Bridged Adapter), чтобы VM могла напрямую подключаться к сети маршрутизатора и получать IP-адрес от DHCP-сервера.

### 4. Настройка Docker-контейнеров

1. **Установка Docker:**
   - Установите Docker на виртуальную машину:
     ```bash
     sudo apt update
     sudo apt install docker.io
     ```

2. **Создание Docker-контейнеров:**
   - Создайте и запустите необходимые Docker-контейнеры.
   - Настройте контейнеры таким образом, чтобы они могли взаимодействовать между собой и с хостом. Например, используйте Docker Compose для упрощения настройки.

3. **Настройка сетевых правил:**
   - Убедитесь, что контейнеры имеют правильные сетевые настройки и порты, необходимые для обмена данными с хостом и другими контейнерами, проброшены правильно.

### 5. Проверка и тестирование

1. **Проверка подключения:**
   - Убедитесь, что вы можете подключиться к удаленной машине с помощью Remmina.
   - Проверьте доступность виртуальной машины и Docker-контейнеров с вашего хоста.

2. **Мониторинг и управление:**
   - Настройте инструменты мониторинга и управления для контроля состояния виртуальной машины и контейнеров, а также для сбора необходимых данных.

Следуя этим шагам, вы сможете настроить удаленную связь через Remmina и управлять виртуальными машинами и Docker-контейнерами на удаленной машине. Если возникнут какие-либо трудности, пожалуйста, уточните, на каком этапе, и я постараюсь помочь более детально.
